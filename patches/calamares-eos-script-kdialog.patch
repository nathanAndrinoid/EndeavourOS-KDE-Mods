--- a/src/modules/eos_script/main.py
+++ b/src/modules/eos_script/main.py
@@ -104,7 +104,33 @@
         if run_in_target:
             libcalamares.utils.target_env_process_output(command, line_cb)
         else:
-            libcalamares.utils.host_env_process_output(command, line_cb)
+            # EndeavourOS modification: Detect if we need to show a kdialog
+            needs_shell = False
+            if os.path.exists(script_path):
+                try:
+                    with open(script_path, 'r') as f:
+                        script_content = f.read()
+                        if 'kdialog' in script_content:
+                            needs_shell = True
+                except Exception as e:
+                    libcalamares.utils.debug(f"Kdialog check failed: {str(e)}")
+
+            if needs_shell:
+                # Prepare environment for kdialog from root to liveuser
+                env = os.environ.copy()
+                if 'DISPLAY' not in env:
+                    env['DISPLAY'] = ':0'
+                if 'XAUTHORITY' not in env:
+                    env['XAUTHORITY'] = '/home/liveuser/.Xauthority'
+                
+                # Ensure kdialog can be found
+                if '/usr/bin' not in env.get('PATH', ''):
+                    env['PATH'] = env.get('PATH', '') + ':/usr/bin'
+
+                libcalamares.utils.debug(f"Running interactive script with kdialog support: {command}")
+                subprocess.run(command, env=env, check=True)
+            else:
+                libcalamares.utils.host_env_process_output(command, line_cb)
     except subprocess.CalledProcessError as cpe:
         return "Failed to run script", "The script failed with error {!s}".format(cpe.stderr)
